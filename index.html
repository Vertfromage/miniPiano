<h1>MiniPiano</h1>Note length: <input id=d value=2 size=1> s<p><div id=p>
<script>
play=((e,t)=>{for(var a,n=(e,t,a,n)=>Math.sin(2*Math.PI*(e/t)*a+n),h=(e,t,a,h)=>Math.sin(2*Math.PI*(e/t*a)+Math.pow(n(e,t,a,0),2)+.75*n(e,t,a,.25)+.1*n(e,t,a,.5)),o=Math.pow(.5*Math.log(1e4*e/44100),2),r=[],M=0;M<44100*t;M++)a=M<88?M/88.2*1e4*h(M,44100,e):1e4*Math.pow(1-(M-88.2)/(44100*(t-.002)),o)*h(M,44100,e),r[M]=a/1e5;var f=new AudioContext({sampleRate:44100}),s=f.createBuffer(1,r.length,44100),c=(s.getChannelData(0).set(r),f.createBufferSource());c.buffer=s,c.connect(f.destination),c.start()})
for(i=0;i<36;i++)f=130.81*1.06**i,[1,3,6,8,10].includes(i%12)?p.innerHTML+="<div class=s style=left:"+(i/2*35-6)+"px onclick=play("+f+",d.value)>":p.innerHTML+="<div onclick=play("+f+",d.value)>"
</script>
<style>*{box-sizing:border-box}#p{width:630px;position:relative}#p div{width:30px;height:200px;float:left;border:1px solid;cursor:pointer}#p div.s{background:#000;position:absolute;height:100px