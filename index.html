<script>
play = (frequency, time) => {
  var sampleRate = 44100;
  var volume = 1e4;
  var attack = .002;
  var base = (i,s,f,x) => {return Math.sin((2 * Math.PI)*(i/s)*f+x)};
  var wave = (i,sampleRate,frequency,volume) => {return Math.sin(2*Math.PI*((i/sampleRate)*frequency)+Math.pow(base(i,sampleRate,frequency,0),2)+(.75*base(i,sampleRate,frequency,.25))+(.1*base(i,sampleRate,frequency,.5)))};
  var dampen = Math.pow(.5*Math.log((frequency*volume)/sampleRate),2);
  var val;
  var data=[];
  for (var i=0; i<sampleRate*time; i++){
    if(i < 88){
      val = volume*(i/(sampleRate*attack))*wave(i,sampleRate,frequency,volume);
    }
    else {
      val = volume*Math.pow((1-((i-(sampleRate*attack))/(sampleRate*(time-attack)))),dampen)*wave(i,sampleRate,frequency,volume);
    }
    data[i] = val/1e5;
  }
  var t=(i,n)=>(n-i)/n;
  var A=new AudioContext({sampleRate:44100});
  var m=A.createBuffer(1,data.length,44100);
  var b=m.getChannelData(0).set(data);
  var s=A.createBufferSource();
  s.buffer=m;
  s.connect(A.destination);
  s.start();
}
</script>

<h1>MiniPiano</h1>
<hr>
<h2>Piano</h2>
<input id=f value=220 size=1> Hz
<input id=d value=2 size=1> s
<button onclick="play(f.value, d.value)">play</button>